<!DOCTYPE html>
<html lang="en">
    <head><title>REST Faceted Search | Metreeca/Java</title>
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="../index.svg">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/themes/prism.min.css">
        <link rel="stylesheet" type="text/css" href="../index.css">
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/components/prism-core.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.26.0/plugins/autoloader/prism-autoloader.min.js"></script>
        <script type="text/javascript" src="../index.js"></script>
    </head>
    <body><input id="toggle" type="checkbox">
        <nav>
            <header><a href="https://www.metreeca.com/" title="Metreeca" style="background-image: url(../index.svg)"></a><span><a href="..">Metreeca/Java</a></span><label for="toggle"></label>
            </header>
            <section><a href="https://github.com/metreeca/java">v0.0.0-*</a><h1><a href="#queries">Queries</a></h1><h2>
                <a href="#items-query">Items Query</a></h2><h2><a href="#terms-query">Terms Query</a></h2><h2>
                <a href="#stats-query">Stats Query</a></h2><h1><a href="#extended-json">Extended JSON</a></h1><h2>
                <a href="#facet-filters">Facet Filters</a></h2><h2><a href="#property-paths">Property Paths</a></h2>
            </section>
        </nav>
        <main>
            <header><a href="https://www.metreeca.com/" title="Metreeca" style="background-image: url(../index.svg)"></a><span><a href="..">Reference</a><button title="Scroll to Top" onclick="document.querySelector('main').scrollTo(0, 0)">REST Faceted Search</button></span><label for="toggle"></label>
            </header>
            <section><p>REST/JSON-LD APIs published with the Metreeca/Java framework support engine-managed faceted
                search capabilities, driven
                by structural and typing constraints specified in the underlying linked data model.</p>
                <h1 id="queries">Queries</h1>
                <p><a href="../javadocs/com/metreeca/json/Query.html">Queries</a> define what kind of results is expected
                    from faceted searches
                    on <a href="../tutorials/consuming-jsonld-apis#read-operations">readable</a> linked data REST/JSON-LD
                    APIs.</p>
                <p>JSON query serialization extends the idiomatic <a href="jsonld-format">JSON-LD</a> format with
                    query-specific objects for
                    serializing facet <a href="#facet-filters">filters</a> and property
                    <a href="#property-paths">paths</a>. Standard JSON serialization applies to
                    all values appearing in filters, including <a href="jsonld-format#literals">shorthands</a> for
                    numeric values and literals with
                    provable datatypes.</p>
                <p>!!! warning Work in progress… specs to be improved and detailed.</p>
                <p>JSON-based queries are appended to container IRIs using one of the following encodings:</p>
                <ul>
                    <li>
                        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURI" target="_blank">URLEncoded</a>
                        (
                        e.g. <code>&quot;http://example.com/container/?&quot;+encodeURI({ &lt;query&gt; })</code>)
                    </li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank">URLSearchParams</a>
                        (
                        e.g. <code>&quot;http://example.com/container/?&quot;+new URLSearchParams({ &lt;query&gt;
                            })</code>)
                    </li>
                </ul>
                <p>The second form supports idiomatic collection filtering (e.g. <code>http://example.com/container/?&lt;property&gt;=&lt;value&gt;&amp;…</code>,
                    but
                    requires:</p>
                <ul>
                    <li>values to contain no comma;</li>
                    <li>boolean, numeric and other literal properties to be specified as such in the driving shape.</li>
                </ul>
                <h2 id="items-query">Items Query</h2>
                <p><a href="../javadocs/com/metreeca/json/queries/Items.html">Items</a> queries return the description of
                    collection items matching a
                    set of facet filters.</p>
                <pre><code>&lt;items query&gt; ::= { // all fields are optional and nullable

    &quot;&lt;filter&gt;&quot;: &lt;value&gt; | [&lt;value&gt;, …],
    
    ⋮
    
    &quot;.order&quot;: &lt;criterion&gt; | [&lt;criterion&gt;,(&lt;criterion&gt;)*],
    &quot;.offset&quot;: &lt;integer&gt;,
    &quot;.limit&quot;: &lt;integer&gt;
    
}

&lt;criterion&gt; :;= &quot;[-+]?&lt;path&gt;&quot;
</code></pre>
                <pre><code>&lt;items response&gt; ::= {
    &quot;@id&quot;: &quot;&lt;target-iri&gt;&quot;
    &quot;contains&quot;: [&lt;value&gt;(, &lt;value&gt;)*]
}
</code></pre>
                <h2 id="terms-query">Terms Query</h2>
                <p><a href="../javadocs/com/metreeca/json/queries/Terms.html">Terms</a> queries return a report detailing
                    option values and counts for
                    a facet specified by a target property path, taking into account applied filters.</p>
                <pre><code>&lt;terms query&gt; ::= {
        
    &quot;&lt;filter&gt;&quot;: &lt;value&gt; | [&lt;value&gt;, …],  // optional and nullable
    
    ⋮

    &quot;.terms&quot;: &quot;&lt;path&gt;&quot;,
    &quot;.offset&quot;: &lt;integer&gt;,
    &quot;.limit&quot;: &lt;integer&gt;
}
</code></pre>
                <pre><code>&lt;terms response&gt; ::= {

    &quot;@id&quot;: &quot;&lt;target-iri&gt;&quot;
        
    &quot;terms&quot;: [ // sorted by descending count
        {
            &quot;value&quot;: { &quot;@id&quot;: &lt;iri&gt;[, &quot;label&quot;: &quot;&lt;label&gt;&quot;]} | &lt;literal&gt;,
            &quot;count&quot;: &lt;number&gt;
        }
    ]
}
</code></pre>
                <h2 id="stats-query">Stats Query</h2>
                <p><a href="../javadocs/com/metreeca/json/queries/Stats.html">Stats</a> queries return a report detailing
                    datatype, count and range
                    stats for a facet specified by a target property path, taking into account applied filters.</p>
                <pre><code>&lt;stats query&gt; ::= {
    
    &quot;&lt;filter&gt;&quot;: &lt;value&gt; | [&lt;value&gt;, …],  // optional and nullable
    
    ⋮

    &quot;.stats&quot;: &quot;&lt;path&gt;&quot;,
    &quot;.offset&quot;: &lt;integer&gt;,
    &quot;.limit&quot;: &lt;integer&gt;
}
</code></pre>
                <pre><code>&lt;stats response&gt; ::= {

    &quot;@id&quot;: &quot;&lt;target-iri&gt;&quot;
    
    // global stats 
    
    &quot;count&quot;: &lt;number&gt;,
    &quot;min&quot;: &lt;value&gt;,
    &quot;max&quot;: &lt;value&gt;,
    
    // datatype-specific stats sorted by descending count
    
    &quot;stats&quot;: [
        {
            &quot;@id&quot;: &quot;&lt;datatype-iri&gt;&quot;,
            &quot;count&quot;: &lt;number&gt;,
            &quot;min&quot;: &lt;value&gt;,
            &quot;max&quot;: &lt;value&gt;
        }
    ]
}
</code></pre>
                <h1 id="extended-json">Extended JSON</h1>
                <h2 id="facet-filters">Facet Filters</h2>
                <pre><code>&lt;filter&gt; ::= {

    &quot;^ &lt;path&gt;&quot;: &quot;&lt;datatype&gt;&quot;, // datatype
    &quot;@ &lt;path&gt;&quot;: &quot;&lt;class&gt;&quot;, // class
    &quot;% &lt;path&gt;&quot;: &lt;value&gt; | [&lt;value&gt;(, &lt;value&gt;)*], // range


    &quot;&gt; &lt;path&gt;&quot;: &lt;value&gt;, // minExclusive
    &quot;&lt; &lt;path&gt;: &lt;value&gt;, // maxExclusive
    &quot;&gt;= &lt;path&gt;&quot;: &lt;value&gt;, // minInclusive
    &quot;&lt;= &lt;path&gt;&quot;: &lt;value&gt;, // maxInclusive
    
    &quot;$&gt; &lt;path&gt;&quot;: &lt;value&gt;, // minLength
    &quot;$&lt; &lt;path&gt;&quot;: &lt;value&gt;, // maxLength
    
    &quot;* &lt;path&gt;&quot;: &quot;pattern&quot;, // pattern (regular expression matching)
    &quot;~ &lt;path&gt;&quot;: &quot;keywords&quot;, // like (stemmed word search)
    &quot;' &lt;path&gt;&quot;: &quot;stem&quot;, // stem (prefix search)
    
    &quot;#&gt; &lt;path&gt;&quot;: &lt;integer&gt;, // minCount
    &quot;#&lt; &lt;path&gt;&quot;: &lt;integer&gt;, // maxCount
    
    &quot;! &lt;path&gt;&quot;: &lt;value&gt; | [&lt;value&gt;(, &lt;value&gt;)*], // all
    &quot;? &lt;path&gt;&quot;: &lt;value&gt; | [&lt;value&gt;(, &lt;value&gt;)*], // any
        
    &quot;&lt;path&gt;&quot;: &lt;value&gt;, //  shorthand for &quot;? &lt;path&quot;: &lt;value&gt;
    &quot;&lt;path&gt;&quot;: [&lt;value&gt;(, &lt;value&gt;)*] // shorthand for &quot;? &lt;path&gt;&quot;: [&lt;value&gt;(, &lt;value&gt;)*]
    
}
</code></pre>
                <h2 id="property-paths">Property Paths</h2>
                <pre><code>&lt;path&gt; ::= (&lt;label&gt; ('.' &lt;label&gt;)*)?
</code></pre>
            </section>
            <footer>© 2022 Metreeca srl. This work is licensed under the
                <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons BY-NC-SA 4.0 License</a>
            </footer>
        </main>
    </body>
</html>